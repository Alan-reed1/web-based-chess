<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess</title>

        <!-- <style>
            #chessBoard {
               /* display: grid; */
               border: 1px solid black;
            } 
            </style> -->
</head>
<body>
    <script>
    var offset = 10;
    var imgSize = 80;
    var rowCount = 8;
    var colCount = 8;
    var height = 100;
    var width = 100;
    
    function createBoard(rowCount, colCount, height, width) {
    var canvas = document.createElement("canvas");
    canvas.id = "chessBoard";
    canvas.width = width * colCount;
    canvas.height = height * rowCount;
    canvas.style.border = "1px solid black";
    document.body.insertBefore(canvas, document.body.childNodes[0]);
    var ctx = canvas.getContext("2d");
    var board = {};
    for (c = 0; c < colCount; c++) {
        board[c] = {};
        for (r = 0; r < rowCount; r++) {
            var bX = (c * width);
            var bY = (r * height);
            board[c][r] = {x: bX, y: bY};
            ctx.beginPath();
            ctx.rect(bX, bY, width, height);
            if ((c + r) % 2 == 0) {
                ctx.fillStyle = "#FFFFFF";
            } else {
                ctx.fillStyle = "green";
            }
            ctx.fill();
            ctx.closePath();
        }
    }
    return board;
    console.log(board)
}

var board = createBoard(rowCount, colCount, height, width);


spacesY = [];
spacesX = [];

function makeSpaces() {
    const squareSize = 100;

    for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {

            let x = col * squareSize;
            let y = row * squareSize;
        
            let position = String.fromCharCode(col + 97) + (8 - row);
            // console.log(`Square (${col}, ${row}) has position ${position}`);
            spacesY.push(y);
            spacesX.push(x);
        }
    }
    console.log(spacesX, "above is spacesX", spacesY);
}
makeSpaces();

function bishop(whereX, whereY, color) {
    var canvas = document.getElementById("chessBoard");
    var ctx = canvas.getContext("2d")
    var bishop = new Image();
    bishop.onload = function() {
        ctx.drawImage(bishop, spacesX[whereX] + offset, spacesY[whereY] + offset, imgSize, imgSize)
    }
    if (color === "white") {
    bishop.src = "https://th.bing.com/th/id/R.85b5ba3279766d35c9638797a34acf8d?rik=qxIrEckPc9wwQg&riu=http%3a%2f%2fwww.clker.com%2fcliparts%2fH%2fr%2fH%2fd%2fw%2fa%2fwhite-bishop-hi.png&ehk=gnpRJr52Uoy3zpN9DKIr7V4Efr0Pw0VEUZJ4zwarVLc%3d&risl=&pid=ImgRaw&r=0";
    } else {
    bishop.src = "https://e7.pngegg.com/pngimages/210/333/png-clipart-chess-piece-bishop-knight-chess-king-sports-thumbnail.png";
  } 
}


function rook(whereX, whereY, color) {
  var canvas = document.getElementById("chessBoard");
  var ctx = canvas.getContext("2d")
  var rook = new Image();
  rook.onload = function() {
    ctx.drawImage(rook, spacesX[whereX] + offset, spacesY[whereY] + offset, imgSize, imgSize)
  }
  if (color === "white") {
    rook.src = "https://th.bing.com/th/id/R.047884054421933010370056da734eaf?rik=NbzUSz6EXsUo2Q&riu=http%3a%2f%2fwww.clker.com%2fcliparts%2fS%2fY%2fZ%2fY%2fA%2fw%2fwhite-rook-hi.png&ehk=16gIv%2fo6oePnpW1hrn7%2fLguMaM0HUbkG5pUZO0lrspc%3d&risl=&pid=ImgRaw&r=0";
  } else {
    rook.src = "https://th.bing.com/th/id/R.b2d15bf6eecb65c2d568c57220ad0ed1?rik=Ub%2fRfFbb89SiDQ&pid=ImgRaw&r=0";
  }
}



function knight(whereX, whereY, color) {
    var canvas = document.getElementById("chessBoard");
    var ctx = canvas.getContext("2d")
    var knight = new Image();
    knight.onload = function() {
        ctx.drawImage(knight, spacesX[whereX] + offset, spacesY[whereY] + offset, imgSize, imgSize)
    }
    if (color === "white") {
        knight.src = "https://clipartspub.com/images/chess-clipart-white-knight-2.png"
    } else {
        knight.src = "https://th.bing.com/th/id/OIP.MxJ5sLk04iB2Li4ZlA8aCAHaL9?w=120&h=194&c=7&r=0&o=5&pid=1.7";
    }
}

function queen(whereX, whereY, color) {
    var canvas = document.getElementById("chessBoard");
    var ctx = canvas.getContext("2d");
    var queen = new Image();
    queen.onload = function() {
        ctx.drawImage(queen, spacesX[whereX] + offset, spacesY[whereY] + offset, imgSize, imgSize)
    }
    if (color === "white") {
        queen.src = "https://th.bing.com/th/id/OIP.1gFyCMJHXWV7ky7rtVuiRQEBDy?pid=ImgDet&rs=1";
    } else {
        queen.src = "https://th.bing.com/th/id/R.1b1fe39fb5f3d8159bf2c8818261b70d?rik=c4cl4kVZlK5J7Q&riu=http%3a%2f%2fwww.symbols.com%2fgi.php%3ftype%3d1%26id%3d3399&ehk=vAxWE4A4Z6oupB8RqM8SxnjuPcvv0HSbcpoYzUv3OD8%3d&risl=&pid=ImgRaw&r=0"
    }
}

function king(whereX, whereY, color) {
    var canvas = document.getElementById("chessBoard");
    var ctx = canvas.getContext("2d");
    var king = new Image();
    king.onload = function() {
        ctx.drawImage(king, spacesX[whereX] + offset, spacesY[whereY] + offset, imgSize, imgSize)
    }
    if (color === "white") {
        king.src = "https://www.pinclipart.com/picdir/big/346-3463011_lights-camera-action-clipart.png"
    } else {
        king.src = "https://www.symbols.com/images/symbol/1/3398_black-king.png";
    }
}
function pawn(whereX, whereY, color) {
    var canvas = document.getElementById("chessBoard");
    var ctx = canvas.getContext("2d");
    var pawn = new Image();
    pawn.onload = function() {
        ctx.drawImage(pawn, spacesX[whereX] + offset, spacesY[whereY] + offset, imgSize, imgSize)
    }
    if (color === "white") {
        pawn.src = "https://th.bing.com/th/id/R.9cba480cb3c801e023387b8f0430065a?rik=M70%2f36dveVcfjw&pid=ImgRaw&r=0";
    } else {
        pawn.src = "https://www.shareicon.net/data/2015/09/27/108210_game_512x512.png";
    }
}   

function initializePieces() {
    function pawnPlacement() {
        for (let i = 0; i < 8; i++) {
            pawn(i, 9, color = "black");
            pawn(i, 55, color = "white");
        }
    }
        

    function rookPlacement() {
        rook(0, 0, color = "black");
        rook(7, 7, color = "black");
        rook(0, 56, color = "white");
        rook(7, 63, color = "white");
    }

    function knightPlacement() {
        knight(1, 0, color = "black");
        knight(6, 0, color = "black");
        knight(1, 57, color = "white");
        knight(6, 63, color = "white");
    }
    
    function bishopPlacement() {
        bishop(2, 0, color = "black");
        bishop(5, 0, color = "black");
        bishop(2, 63, color = "white");
        bishop(5, 63, color = "white");
    }
    
    function queenPlacement() {
        queen(3, 0, color = "black");
        queen(3, 63, color = "white");
    }

    function kingPlacement() {
        king(4, 0, color = "black");
        king(4, 63, color = "white")
    }

    pawnPlacement();
    rookPlacement();
    knightPlacement();
    bishopPlacement();
    queenPlacement();
    kingPlacement();
}
    initializePieces();




    // movement functionality
    const canvas = document.getElementById('chessBoard');
    canvas.addEventListener('click', function(event) {
  const x = event.offsetX;
  const y = event.offsetY;
  console.log(x, y)
  let square = null;
  for (let i = 0; i < spacesX.length; i++) {
    if (i % 8 === 7) {
      // handle last column
      if (x >= spacesX[i] && y >= spacesY[i] && y <= spacesY[i+7]) {
        square = i;
        console.log(square + " last column");
        break;
      }
    } else if (Math.floor(i / 8) === 7) {
      // handle last row
      if (y >= spacesY[i] && x >= spacesX[i] && x < spacesX[i+1]) {
        square = i;
        console.log(square + " last row");
        break;
      }
    } else if (x >= spacesX[63] && y >= spacesY[63]) {
        // handle intersection
        square = 64;
        console.log(square + " intersection");
        break;
    }
    else if (x >= spacesX[i] && x < spacesX[i+1] && y >= spacesY[i] && y <= spacesY[i+8]) {
      // handle all other squares
      square = i;
      console.log(square + " all");
      break;
    }
  }
  if (square !== null) {
    console.log(`Square clicked: ${String.fromCharCode(97+square%8)}${8-Math.floor(square/8)}`);
  } else {
    console.log('No square clicked');
  }
});


  canvas.addEventListener("mousemove", (event) => {
    const rect = canvas.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;
    // console.log("x:", x, "y:", y);
  });








      </script>
</body>
</html>
